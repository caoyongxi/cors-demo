<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" />
	<title>
		<%= title %>
	</title>
	<script src="https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/js-cookie/2.2.1/js.cookie.js"></script>
</head>

<body>
	<button id="cors">send cors</button>
	<button id="cors2">send cors2</button>
</body>
<script>
	Cookies.set('cookie-value', '1', { domain: 'huoyun-test.djtest.cn' });
	Cookies.set('cookie-value', '2', { domain: 'test.djtest.cn' });
	Cookies.set('cookie-value', '3', { domain: 'djtest.cn' });

	// 设置header
	axios.defaults.headers.common['client-header'] = 1;
	// 跨域时携带cookie
	axios.defaults.withCredentials = true;

	var cors = document.querySelector('#cors');
	cors.onclick = function () {
		axios.get('http://test.djtest.cn:3000/api/getcors', {
			params: {
				'method': 'cors-get',
			},
		})
			.then(function (res) {
				debugger
			})
			.catch(function (err) {
				debugger
			});
	}

	// 验证 Access-Control-Max-Age
	var cors = document.querySelector('#cors2');
	cors.onclick = function () {
		axios.get('http://test.djtest.cn:3000/api/getcors2', {
			params: {
				'method': 'cors-get',
			},
		})
			.then(function (res) {
				debugger
			})
			.catch(function (err) {
				debugger
			});
	}

</script>

</html>